// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`QueueTasksService executeTasks failed at finalisation: processedTaskOrder 1`] = `
[
  "connection",
  "init-directory",
  "authentication",
  "pre-command1",
  "pre-command2",
  "pre-command3",
  "share1-filelist",
  "share2-filelist",
  "share1-chunks",
  "share2-chunks",
  "post-command1",
  "post-command2",
  "post-command3",
  "close-connection",
  "share1-compact",
  "share2-compact",
  "refcnt-host",
  "refcnt-pool",
]
`;

exports[`QueueTasksService executeTasks failed at finalisation: task 1`] = `
{
  "__type": "grouptask",
  "groupName": "GLOBAL",
  "localContext": {
    "command": "GLOBAL",
  },
  "subtasks": [
    {
      "__type": "grouptask",
      "groupName": "INITIALISATION",
      "localContext": {
        "command": "INITIALISATION",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "connection",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "connection",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "init-directory",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "init-directory",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "authentication",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "authentication",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "PRE_COMMANDS",
      "localContext": {
        "command": "PRE_COMMANDS",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command1",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "pre-command1",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command2",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "pre-command2",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command3",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "pre-command3",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "SHARES",
      "localContext": {
        "command": "SHARES",
      },
      "subtasks": [
        {
          "__type": "grouptask",
          "groupName": "SHARE1",
          "localContext": {
            "command": "SHARE1",
          },
          "subtasks": [
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share1-filelist",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share1-chunks",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share1-compact",
            },
          ],
        },
        {
          "__type": "grouptask",
          "groupName": "SHARE2",
          "localContext": {
            "command": "SHARE2",
          },
          "subtasks": [
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share2-filelist",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share2-chunks",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share2-compact",
            },
          ],
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "POST_COMMANDS",
      "localContext": {
        "command": "POST_COMMANDS",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command1",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "post-command1",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command2",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "post-command2",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command3",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "post-command3",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "FINALISATION",
      "localContext": {
        "command": "FINALISATION",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "close-connection",
          },
          "priority": "POST_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "close-connection",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "refcnt-host",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "FAILED",
          "taskName": "refcnt-host",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "refcnt-pool",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "refcnt-pool",
        },
      ],
    },
  ],
}
`;

exports[`QueueTasksService executeTasks failed at pre init step: processedTaskOrder 1`] = `
[
  "connection",
  "init-directory",
  "authentication",
  "close-connection",
  "share1-compact",
  "share2-compact",
  "refcnt-host",
  "refcnt-pool",
]
`;

exports[`QueueTasksService executeTasks failed at pre init step: task 1`] = `
{
  "__type": "grouptask",
  "groupName": "GLOBAL",
  "localContext": {
    "command": "GLOBAL",
  },
  "subtasks": [
    {
      "__type": "grouptask",
      "groupName": "INITIALISATION",
      "localContext": {
        "command": "INITIALISATION",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "connection",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "connection",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "init-directory",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "init-directory",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "authentication",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "FAILED",
          "taskName": "authentication",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "PRE_COMMANDS",
      "localContext": {
        "command": "PRE_COMMANDS",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command1",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "ABORTED",
          "taskName": "pre-command1",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command2",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "ABORTED",
          "taskName": "pre-command2",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command3",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "ABORTED",
          "taskName": "pre-command3",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "SHARES",
      "localContext": {
        "command": "SHARES",
      },
      "subtasks": [
        {
          "__type": "grouptask",
          "groupName": "SHARE1",
          "localContext": {
            "command": "SHARE1",
          },
          "subtasks": [
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "ABORTED",
              "taskName": "share1-filelist",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "ABORTED",
              "taskName": "share1-chunks",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share1-compact",
            },
          ],
        },
        {
          "__type": "grouptask",
          "groupName": "SHARE2",
          "localContext": {
            "command": "SHARE2",
          },
          "subtasks": [
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "ABORTED",
              "taskName": "share2-filelist",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "ABORTED",
              "taskName": "share2-chunks",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share2-compact",
            },
          ],
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "POST_COMMANDS",
      "localContext": {
        "command": "POST_COMMANDS",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command1",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "ABORTED",
          "taskName": "post-command1",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command2",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "ABORTED",
          "taskName": "post-command2",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command3",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "ABORTED",
          "taskName": "post-command3",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "FINALISATION",
      "localContext": {
        "command": "FINALISATION",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "close-connection",
          },
          "priority": "POST_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "close-connection",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "refcnt-host",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "refcnt-host",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "refcnt-pool",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "refcnt-pool",
        },
      ],
    },
  ],
}
`;

exports[`QueueTasksService executeTasks failed at pre progress: processedTaskOrder 1`] = `
[
  "connection",
  "init-directory",
  "authentication",
  "pre-command1",
  "pre-command2",
  "pre-command3",
  "share1-filelist",
  "share2-filelist",
  "share1-chunks",
  "close-connection",
  "share1-compact",
  "share2-compact",
  "refcnt-host",
  "refcnt-pool",
]
`;

exports[`QueueTasksService executeTasks failed at pre progress: task 1`] = `
{
  "__type": "grouptask",
  "groupName": "GLOBAL",
  "localContext": {
    "command": "GLOBAL",
  },
  "subtasks": [
    {
      "__type": "grouptask",
      "groupName": "INITIALISATION",
      "localContext": {
        "command": "INITIALISATION",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "connection",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "connection",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "init-directory",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "init-directory",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "authentication",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "authentication",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "PRE_COMMANDS",
      "localContext": {
        "command": "PRE_COMMANDS",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command1",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "pre-command1",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command2",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "pre-command2",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command3",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "pre-command3",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "SHARES",
      "localContext": {
        "command": "SHARES",
      },
      "subtasks": [
        {
          "__type": "grouptask",
          "groupName": "SHARE1",
          "localContext": {
            "command": "SHARE1",
          },
          "subtasks": [
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share1-filelist",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "FAILED",
              "taskName": "share1-chunks",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share1-compact",
            },
          ],
        },
        {
          "__type": "grouptask",
          "groupName": "SHARE2",
          "localContext": {
            "command": "SHARE2",
          },
          "subtasks": [
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share2-filelist",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "ABORTED",
              "taskName": "share2-chunks",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share2-compact",
            },
          ],
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "POST_COMMANDS",
      "localContext": {
        "command": "POST_COMMANDS",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command1",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "ABORTED",
          "taskName": "post-command1",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command2",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "ABORTED",
          "taskName": "post-command2",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command3",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "ABORTED",
          "taskName": "post-command3",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "FINALISATION",
      "localContext": {
        "command": "FINALISATION",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "close-connection",
          },
          "priority": "POST_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "close-connection",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "refcnt-host",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "refcnt-host",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "refcnt-pool",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "refcnt-pool",
        },
      ],
    },
  ],
}
`;

exports[`QueueTasksService executeTasks success backup: processedTaskOrder 1`] = `
[
  "connection",
  "init-directory",
  "authentication",
  "pre-command1",
  "pre-command2",
  "pre-command3",
  "share1-filelist",
  "share2-filelist",
  "share1-chunks",
  "share2-chunks",
  "post-command1",
  "post-command2",
  "post-command3",
  "close-connection",
  "share1-compact",
  "share2-compact",
  "refcnt-host",
  "refcnt-pool",
]
`;

exports[`QueueTasksService executeTasks success backup: task 1`] = `
{
  "__type": "grouptask",
  "groupName": "GLOBAL",
  "localContext": {
    "command": "GLOBAL",
  },
  "subtasks": [
    {
      "__type": "grouptask",
      "groupName": "INITIALISATION",
      "localContext": {
        "command": "INITIALISATION",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "connection",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "connection",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "init-directory",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "init-directory",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "authentication",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "authentication",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "PRE_COMMANDS",
      "localContext": {
        "command": "PRE_COMMANDS",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command1",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "pre-command1",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command2",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "pre-command2",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "pre-command3",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "pre-command3",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "SHARES",
      "localContext": {
        "command": "SHARES",
      },
      "subtasks": [
        {
          "__type": "grouptask",
          "groupName": "SHARE1",
          "localContext": {
            "command": "SHARE1",
          },
          "subtasks": [
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share1-filelist",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share1-chunks",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share1-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share1-compact",
            },
          ],
        },
        {
          "__type": "grouptask",
          "groupName": "SHARE2",
          "localContext": {
            "command": "SHARE2",
          },
          "subtasks": [
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share2-filelist",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share2-chunks",
            },
            {
              "__type": "subtask",
              "localContext": {
                "command": "share2-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "SUCCESS",
              "taskName": "share2-compact",
            },
          ],
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "POST_COMMANDS",
      "localContext": {
        "command": "POST_COMMANDS",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command1",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "post-command1",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command2",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "post-command2",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "post-command3",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "post-command3",
        },
      ],
    },
    {
      "__type": "grouptask",
      "groupName": "FINALISATION",
      "localContext": {
        "command": "FINALISATION",
      },
      "subtasks": [
        {
          "__type": "subtask",
          "localContext": {
            "command": "close-connection",
          },
          "priority": "POST_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "close-connection",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "refcnt-host",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "refcnt-host",
        },
        {
          "__type": "subtask",
          "localContext": {
            "command": "refcnt-pool",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "SUCCESS",
          "taskName": "refcnt-pool",
        },
      ],
    },
  ],
}
`;

exports[`QueueTasksService serializeBackupTask/deserializeBackupTask should serialize/deserialize: deserialized 1`] = `
QueueTasks {
  "__type": "grouptask",
  "groupName": "GLOBAL",
  "localContext": TaskLocalContext {
    "command": "GLOBAL",
    "excludes": undefined,
    "host": undefined,
    "includes": undefined,
    "number": undefined,
    "sharePath": undefined,
    "shares": undefined,
  },
  "subtasks": [
    QueueGroupTasks {
      "__type": "grouptask",
      "groupName": "INITIALISATION",
      "localContext": TaskLocalContext {
        "command": "INITIALISATION",
        "excludes": undefined,
        "host": undefined,
        "includes": undefined,
        "number": undefined,
        "sharePath": undefined,
        "shares": undefined,
      },
      "subtasks": [
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "connection",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "INITIALISATION",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "connection",
        },
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "init-directory",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "INITIALISATION",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "init-directory",
        },
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "authentication",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "INITIALISATION",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "authentication",
        },
      ],
    },
    QueueGroupTasks {
      "__type": "grouptask",
      "groupName": "PRE_COMMANDS",
      "localContext": TaskLocalContext {
        "command": "PRE_COMMANDS",
        "excludes": undefined,
        "host": undefined,
        "includes": undefined,
        "number": undefined,
        "sharePath": undefined,
        "shares": undefined,
      },
      "subtasks": [
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "pre-command1",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "PRE_PROCESSING",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "pre-command1",
        },
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "pre-command2",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "PRE_PROCESSING",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "pre-command2",
        },
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "pre-command3",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "PRE_PROCESSING",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "pre-command3",
        },
      ],
    },
    QueueGroupTasks {
      "__type": "grouptask",
      "groupName": "SHARES",
      "localContext": TaskLocalContext {
        "command": "SHARES",
        "excludes": undefined,
        "host": undefined,
        "includes": undefined,
        "number": undefined,
        "sharePath": undefined,
        "shares": undefined,
      },
      "subtasks": [
        QueueGroupTasks {
          "__type": "grouptask",
          "groupName": "SHARE1",
          "localContext": TaskLocalContext {
            "command": "SHARE1",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "subtasks": [
            QueueSubTask {
              "__type": "subtask",
              "localContext": TaskLocalContext {
                "command": "share1-filelist",
                "excludes": undefined,
                "host": undefined,
                "includes": undefined,
                "number": undefined,
                "sharePath": undefined,
                "shares": undefined,
              },
              "priority": "PRE_PROCESSING",
              "progression": QueueTaskProgression {
                "compressedFileSize": 0n,
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": 0n,
                "newCompressedFileSize": 0n,
                "newFileCount": 0,
                "newFileSize": 0n,
                "progressCurrent": 0n,
                "progressMax": 0n,
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share1-filelist",
            },
            QueueSubTask {
              "__type": "subtask",
              "localContext": TaskLocalContext {
                "command": "share1-chunks",
                "excludes": undefined,
                "host": undefined,
                "includes": undefined,
                "number": undefined,
                "sharePath": undefined,
                "shares": undefined,
              },
              "priority": "PROCESSING",
              "progression": QueueTaskProgression {
                "compressedFileSize": 0n,
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": 0n,
                "newCompressedFileSize": 0n,
                "newFileCount": 0,
                "newFileSize": 0n,
                "progressCurrent": 0n,
                "progressMax": 0n,
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share1-chunks",
            },
            QueueSubTask {
              "__type": "subtask",
              "localContext": TaskLocalContext {
                "command": "share1-compact",
                "excludes": undefined,
                "host": undefined,
                "includes": undefined,
                "number": undefined,
                "sharePath": undefined,
                "shares": undefined,
              },
              "priority": "FINALISATION",
              "progression": QueueTaskProgression {
                "compressedFileSize": 0n,
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": 0n,
                "newCompressedFileSize": 0n,
                "newFileCount": 0,
                "newFileSize": 0n,
                "progressCurrent": 0n,
                "progressMax": 0n,
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share1-compact",
            },
          ],
        },
        QueueGroupTasks {
          "__type": "grouptask",
          "groupName": "SHARE2",
          "localContext": TaskLocalContext {
            "command": "SHARE2",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "subtasks": [
            QueueSubTask {
              "__type": "subtask",
              "localContext": TaskLocalContext {
                "command": "share2-filelist",
                "excludes": undefined,
                "host": undefined,
                "includes": undefined,
                "number": undefined,
                "sharePath": undefined,
                "shares": undefined,
              },
              "priority": "PRE_PROCESSING",
              "progression": QueueTaskProgression {
                "compressedFileSize": 0n,
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": 0n,
                "newCompressedFileSize": 0n,
                "newFileCount": 0,
                "newFileSize": 0n,
                "progressCurrent": 0n,
                "progressMax": 0n,
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share2-filelist",
            },
            QueueSubTask {
              "__type": "subtask",
              "localContext": TaskLocalContext {
                "command": "share2-chunks",
                "excludes": undefined,
                "host": undefined,
                "includes": undefined,
                "number": undefined,
                "sharePath": undefined,
                "shares": undefined,
              },
              "priority": "PROCESSING",
              "progression": QueueTaskProgression {
                "compressedFileSize": 0n,
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": 0n,
                "newCompressedFileSize": 0n,
                "newFileCount": 0,
                "newFileSize": 0n,
                "progressCurrent": 0n,
                "progressMax": 0n,
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share2-chunks",
            },
            QueueSubTask {
              "__type": "subtask",
              "localContext": TaskLocalContext {
                "command": "share2-compact",
                "excludes": undefined,
                "host": undefined,
                "includes": undefined,
                "number": undefined,
                "sharePath": undefined,
                "shares": undefined,
              },
              "priority": "FINALISATION",
              "progression": QueueTaskProgression {
                "compressedFileSize": 0n,
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": 0n,
                "newCompressedFileSize": 0n,
                "newFileCount": 0,
                "newFileSize": 0n,
                "progressCurrent": 0n,
                "progressMax": 0n,
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share2-compact",
            },
          ],
        },
      ],
    },
    QueueGroupTasks {
      "__type": "grouptask",
      "groupName": "POST_COMMANDS",
      "localContext": TaskLocalContext {
        "command": "POST_COMMANDS",
        "excludes": undefined,
        "host": undefined,
        "includes": undefined,
        "number": undefined,
        "sharePath": undefined,
        "shares": undefined,
      },
      "subtasks": [
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "post-command1",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "PROCESSING",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "post-command1",
        },
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "post-command2",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "PROCESSING",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "post-command2",
        },
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "post-command3",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "PROCESSING",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "post-command3",
        },
      ],
    },
    QueueGroupTasks {
      "__type": "grouptask",
      "groupName": "FINALISATION",
      "localContext": TaskLocalContext {
        "command": "FINALISATION",
        "excludes": undefined,
        "host": undefined,
        "includes": undefined,
        "number": undefined,
        "sharePath": undefined,
        "shares": undefined,
      },
      "subtasks": [
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "close-connection",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "POST_PROCESSING",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "close-connection",
        },
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "refcnt-host",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "FINALISATION",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "refcnt-host",
        },
        QueueSubTask {
          "__type": "subtask",
          "localContext": TaskLocalContext {
            "command": "refcnt-pool",
            "excludes": undefined,
            "host": undefined,
            "includes": undefined,
            "number": undefined,
            "sharePath": undefined,
            "shares": undefined,
          },
          "priority": "FINALISATION",
          "progression": QueueTaskProgression {
            "compressedFileSize": 0n,
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": 0n,
            "newCompressedFileSize": 0n,
            "newFileCount": 0,
            "newFileSize": 0n,
            "progressCurrent": 0n,
            "progressMax": 0n,
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "refcnt-pool",
        },
      ],
    },
  ],
}
`;

exports[`QueueTasksService serializeBackupTask/deserializeBackupTask should serialize/deserialize: serialized 1`] = `
{
  "__type": "grouptask",
  "groupName": "GLOBAL",
  "localContext": {
    "command": "GLOBAL",
  },
  "subtasks": [
    {
      "groupName": "INITIALISATION",
      "localContext": {
        "command": "INITIALISATION",
      },
      "subtasks": [
        {
          "localContext": {
            "command": "connection",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "connection",
        },
        {
          "localContext": {
            "command": "init-directory",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "init-directory",
        },
        {
          "localContext": {
            "command": "authentication",
          },
          "priority": "INITIALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "authentication",
        },
      ],
    },
    {
      "groupName": "PRE_COMMANDS",
      "localContext": {
        "command": "PRE_COMMANDS",
      },
      "subtasks": [
        {
          "localContext": {
            "command": "pre-command1",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "pre-command1",
        },
        {
          "localContext": {
            "command": "pre-command2",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "pre-command2",
        },
        {
          "localContext": {
            "command": "pre-command3",
          },
          "priority": "PRE_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "pre-command3",
        },
      ],
    },
    {
      "groupName": "SHARES",
      "localContext": {
        "command": "SHARES",
      },
      "subtasks": [
        {
          "groupName": "SHARE1",
          "localContext": {
            "command": "SHARE1",
          },
          "subtasks": [
            {
              "localContext": {
                "command": "share1-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share1-filelist",
            },
            {
              "localContext": {
                "command": "share1-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share1-chunks",
            },
            {
              "localContext": {
                "command": "share1-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share1-compact",
            },
          ],
        },
        {
          "groupName": "SHARE2",
          "localContext": {
            "command": "SHARE2",
          },
          "subtasks": [
            {
              "localContext": {
                "command": "share2-filelist",
              },
              "priority": "PRE_PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share2-filelist",
            },
            {
              "localContext": {
                "command": "share2-chunks",
              },
              "priority": "PROCESSING",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share2-chunks",
            },
            {
              "localContext": {
                "command": "share2-compact",
              },
              "priority": "FINALISATION",
              "progression": {
                "compressedFileSize": "0",
                "errorCount": 0,
                "fileCount": 0,
                "fileSize": "0",
                "newCompressedFileSize": "0",
                "newFileCount": 0,
                "newFileSize": "0",
                "progressCurrent": "0",
                "progressMax": "0",
                "speed": 0,
              },
              "state": "WAITING",
              "taskName": "share2-compact",
            },
          ],
        },
      ],
    },
    {
      "groupName": "POST_COMMANDS",
      "localContext": {
        "command": "POST_COMMANDS",
      },
      "subtasks": [
        {
          "localContext": {
            "command": "post-command1",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "post-command1",
        },
        {
          "localContext": {
            "command": "post-command2",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "post-command2",
        },
        {
          "localContext": {
            "command": "post-command3",
          },
          "priority": "PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "post-command3",
        },
      ],
    },
    {
      "groupName": "FINALISATION",
      "localContext": {
        "command": "FINALISATION",
      },
      "subtasks": [
        {
          "localContext": {
            "command": "close-connection",
          },
          "priority": "POST_PROCESSING",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "close-connection",
        },
        {
          "localContext": {
            "command": "refcnt-host",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "refcnt-host",
        },
        {
          "localContext": {
            "command": "refcnt-pool",
          },
          "priority": "FINALISATION",
          "progression": {
            "compressedFileSize": "0",
            "errorCount": 0,
            "fileCount": 0,
            "fileSize": "0",
            "newCompressedFileSize": "0",
            "newFileCount": 0,
            "newFileSize": "0",
            "progressCurrent": "0",
            "progressMax": "0",
            "speed": 0,
          },
          "state": "WAITING",
          "taskName": "refcnt-pool",
        },
      ],
    },
  ],
}
`;
